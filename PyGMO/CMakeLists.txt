SET(PYGMO_INSTALL_PATH ${PYTHON_MODULES_PATH}/PyGMO)
ADD_DEFINITIONS(-DPAGMO_DLL_IMPORT_API)

MACRO(PYTHON_CPPMODULE arg1)
	SET_TARGET_PROPERTIES(${arg1} PROPERTIES PREFIX "")
	IF(PYDEXTENSION)
		SET_TARGET_PROPERTIES(${arg1} PROPERTIES SUFFIX ".pyd")
	ENDIF(PYDEXTENSION)
	TARGET_LINK_LIBRARIES(${arg1} ${MANDATORY_LIBRARIES} ${PYTHON_LIBRARIES} ${ARGN})
	STRING(REGEX REPLACE "^_" "" DIR_ARG ${arg1})
	INSTALL(TARGETS ${arg1}
		RUNTIME DESTINATION ${PYGMO_INSTALL_PATH}
		LIBRARY DESTINATION ${PYGMO_INSTALL_PATH}
	)
ENDMACRO(PYTHON_CPPMODULE)

ADD_DEFINITIONS(-DPAGMO_BUILD_PYGMO)
ADD_LIBRARY(_PyGMO SHARED PyGMO.cpp)
PYTHON_CPPMODULE(_PyGMO)
INSTALL(FILES __init__.py DESTINATION ${PYGMO_INSTALL_PATH})
